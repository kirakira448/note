本章节要讲的用例图是项目经理、产品经理这些岗位更多会使用到的UML图，常见于项目商务竞标书、给甲方的需求规格书、或者是计算机系毕业设计论文中。

在做技术方案分析上很少使用UML用例图，它更多出现在需求PRD、给甲方的需求规格书等文档中。不过仍然建议大家掌握，尤其是还在上大学的学生，在写毕业论文论文时使用上用例图说明系统的功能能起到事半功倍的效果，比单纯的文字描述要加分很多。

用例图有什么作用？简单来说它时UML工具包里用来描述系统需求的图，它主要表达两件事情：

1. 这个系统有谁在用
    
2. 这些人通过系统能做什么事情
    

我们平时接触的需求大部分都是以这两个问题来展开描述的，而目用例图本身的语法能以可视化的方式描绘出呈现出上面两个问题的答案--系统的用户和用户能完成的事情。

比如用我们上一节《[怎么把技术评审做得领导、同事、自己都觉得好](http://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&mid=2247500416&idx=1&sn=bc63337bf23aa555efc75aee4e261d29&chksm=fa831317cdf49a018093e7555ce74ec15c5b3706c90b6f74202e1ed0948bc0bd40d0a5e4d839&scene=21#wechat_redirect)》中给大家演示过的保险理赔业务系统，它的主要功能用用例图可以表示如下：

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/1.jpg)

本节我们会介绍使用UML用例图可视化地表达系统需求的知识、它的常用语法等，由于这部分内容就超过4000字了，为了控制阅读体验，我会在下一节来具体给出一些用例图的实践以及使用建议，同时还会介绍与用例图经常配合使用的用例表，整理一个好用的用例模版给大家。

## 初识用例图

作为开发人员很多人习惯用技术语言来描述一个需求、一个系统，但其实需求之所以能成为需求，系统之所以让我们建设一定是有人有真实的需求，想要通过系统解决满足他们的诉求，解决他们的痛点。

我在面试软件工程师，尤其是面试简历上有项目管理经验的工程师时，会让他们挑一个觉得最值得拿出来说的项目给我讲一下，目的之一是想要看一下面试者表达的条理性，通过他的讲述让我对项目有一定了解后再继续深入。

面试者的表达往往会有下面这几种问题：

- 上来就要讲具体技术细节，系统功能不知道怎么整理成简单的话表达出来
    
- 喜欢用偏技术领域的语言来介绍系统功能，让人摸不着头脑
    
- 喜欢说本系统划分成多少个模块，每个模块能介绍一堆，但很难让人理解每个模块之间的关系是什么，他们是怎么满足系统需求的
    

为了搞清楚项目是做什么的，大概的需求是什么，我通常会问两个问题：

1. 这个系统有谁在用
    
2. 这些人通过这个系统能做什么
    

通过思考这两个问题，一般人就能比较条理清楚地表达系统的需求了，其实用例图就是用来回答这两个问题的，我们按照这两个问题整理出系统需求中的一条条用例（xxx 可以做某事）再转换成用例图，它的语法不会涉及到技术用于，能从清晰易懂的角度表达出和呈现出系统需求。

### 基本语法

用例图是用来描述某某类用户/角色通过某某系统能做什么事情的，用例图描述系统的角度比其他UML更往外，它关注的是系统的外在表现以及系统与人的交互。 下面是一个最简单最基础的用例图，通过这个用例图我们来逐一展开说一下它的语法。

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/2.jpg)

### 角色/执行者（图中小人）：

对使用需求的人进行归类后，可以总结出有哪些角色使用本系统。不同的角色工作职责不同或者叫使用本系统的目的不同，他们需要用到的系统功能也不太一样。用例图中的一个小人就代表一类角色，我们思考和分析系统的需求时，可以从不同角色的角度来思考。

例如我们要做一个考勤系统的时候，你会怎样思考系统的需求呢？比较好的方式是先思考什么角色会使用系统，然后再注意思考不同的角色对系统有什么需求。如果自己分析不清楚就需要让产品经理、运营等需求来源方一起参与进来一起分析。

我们大概可以估计到会有：一般员工、部门经理、HR考勤专员、HR薪资核算专员这些角色会用这个考勤系统，有了角色后我们就需要考虑他们的关注点分别是什么：

- 对于一般员工除了打卡，他还会关系什么？考勤异常记录、平均工时？
    
- 部门经理使用这个系统除了查看部门人员的考勤情况，还需要关注什么？今日出勤率？员工考勤异常次数？以及部门经理应该只能查看自己部门人员的考勤。
    
- 对于HR里负责考勤的专员，他是不是要做一些考勤统计？
    
- HR薪资核算专员，要在发薪日前根据员工每月考勤来核算员工的实际发薪是多少。
    

这种思考方式让我们能更全面地发掘系统的需求。 角色是对系统使用者的抽象，一个角色可以代表多个具体使用系统的人，而同一个人也可以拥有多个角色，这个代表角色的小人在UML里的专业术语叫做执行者（Actor）。

### 用例 (Use Case)

用例图中的一个圆圈代表一个用例，一个用例可以理解为一个功能，当然有可能是一个大功能， 比如xx管理，其实可以再细分出增加xx、编辑xx之类的具体功能，这个在后面进阶语法里有进一步 说明。 圆圈里会有一段用“动宾格式”的文字表明系统能做什么。 

下面以考勤系统为例，员工用系统有两个需求“打卡”和“查看本人考勤记录”，用例图这么表示。  

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/3.jpg)

### 关联：

关联是角色与用例之间的线条，用来联系执行者和用例，表示某某角色能执行什么用例。

线条的指向代表数据的流向或者启动方向

- 如果箭头指向用例表示执行者需要向其他输入数据或者主动启动才能让执行执行用例的功能
    
- 箭头指向执行者，一般表示系统的功能向执行者输出数据。
    
- 用例图里箭头不是必须的，一般来说用例总是由执行者启动即箭头应该指向用例，但是表示系统主动通知之类的功能时箭头也可以从用例指向执行者。
    

### 系统边界

- 用例图里框住所有用例的方框叫做系统边界，系统边界能表达出系统的范围，不过并不是那么好界定，需要对业务有足够的了解
    
- 系统边界在用例图里不是必须的，通常的做法是用一个全局的用例图表达系统宏观的需求，这个宏观用例图中需要画出系统边界，但是宏观用例图不能说清楚需求，还需要多个细化的用例图，细化的用例图不用画出边界。
    

## 进阶语法

上面一小节介绍的是用例图最基本的语法，接下来介绍几个除了基本语法外还会经常用到的进阶语法，这些进阶语法包括：

- 角色继承
    
- 包含用例(include)
    
- 扩展用例(extend)
    

下面继续以考勤系统的角色和用例来展开这几个语法

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/4.jpg)

### 角色继承

上面这个用例图里我们看到几个小人用类图里继承的箭头连了起来，这个画法在用例图中表示角色继承。什么意思呢？图里有三个小人，代表使用系统的三类角色“员工”、“考勤专员”、“人力资源总监”，像员工使用系统能做的事情“登录系统”、“打卡”、“查看自己的考勤”也是考勤专员和人力总监能做使用系统做的事情。

仔细想想也是,无论是“考勤专员”还是“人力资源总监”他们本质上都是员工，在系统中都能做一般员工能做的事情，只不过由于自己岗位职责的不同考勤专员还能管理考勤，而人力资源总监除了在系统中能使用一般员工、考勤专员在系统中能使用的功能外还能查看用工成本，这个属于人力总监这个岗位职责独有的功能。

像上面用例图中“登录系统”、“打卡”这类系统中每个角色都有的功能，如果每个角色都画出这些用例，整个用例图会显得很杂乱且没有层次。

所以我们可以通过提炼基础角色拥有的用例，让更高级的角色去继承用例这种画法让整个用例图更有层次感，上面的这个用例图通过用例继承就表达出了一般员工能做的事情，考勤专员也能做，考勤专员能做的事情人力资源总监也能做并且还能做考勤专员不能做的事情。

### 包含用例(include)

我们做的很多项目，尤其是管理后台类的项目中大部分功能都CRUD类的操作是，这个时候我们可以把这些操作归类成“某某东西管理”功能，比如下面这个电商管理后台的“商品管理功能”

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/5.jpg)

通过这个管理后台商品管理模块的截图我们可以看到，商品管理是一个大类功能它可以细分可分为这些子功能 商品管理

- 查看商品
    
- 添加商品
    
- 修改商品
    

那么在用例图中表示管理员用系统管理商品这件事时，可以把“商品管理”画成用例，把具体的“查看商品”，“添加商品”这些功能画成“商品管理”的包含用例（也可以叫子用例）。

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/6.jpg)

上面这个用例图“商品管理”这个用例有三个子用例，图中用虚线分别指向“查看商品”、“添加商品”、“修改商品”，虚线上还有个`<<include>>`标记。这表示子用例是父用例的一部分也就是include的意思。

我见过很多第三方文档里的用例图，父用例和子用例是用直线相连并且还没有用`<<include>>`进行标记 ，比如这样：

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/7.jpg)

这个大家看到了一定要注意，自己画图用到子用例的时候不要忘了include这个语法。

### 扩展用例(extend)

扩展用例用来表示，在原用例基础上还能扩展出来的用例：表示在原功能的基础上还能使用的功能。

比如用户在一个数据统计后台可以查看各类运营报表，在查看报表的基础上还可以对正在查看的报表进行导出和打印，这里“打印报表”和“导出报表”就是“查看报表”用例的扩展用例，使用用例图这么表示：

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/8.jpg)

扩展(Extend)表示的意思是：在某用例的基础上还能做什么事情，比如上面这个例子，如果“导出报表”、“打印报表”不存在是不会影响“查看报表”的，而如果“查看报表”不存在则用户无法在“查看报表”的基础上做“导出报表”和“打印报表”的工作。

注意带有`<<extend>>`标记的虚线是由扩展用例指向前置的基础用例的。

如果我们像下面这样画用例图，则表示“查看报表”、“导出报表”、“打印报表”是三个独立的功能，不查看报表也可以导出和打印报表

![图片](设计/程序员画图/img/14_程序员转型PM的一项必备基础技能（上）/9.jpg)

显然如果产品需求是导出正在查看的报表，那么用例图应该画成上面使用扩展用例的样子，在绘制用例图的时候一定要根据产品需求使用正确的用例图语法。

## 总结

本章节的主要内容是使用用例图获取和直观的展示系统需求，其实系统需求往往就是围绕下面这两个问题的各个功能点：

1. 这个系统有谁在用
    
2. 这些人通过这个系统能做什么
    

本节我们介绍了使用UML用例图可视化地表达系统需求的知识、结合一些典型的例子学习了它的常用语法，下一节我们来具体看一些用例图的实践以及使用建议，同时我还会介绍与用例图经常配合使用的用例表，整理一个好用的用例模版给大家。