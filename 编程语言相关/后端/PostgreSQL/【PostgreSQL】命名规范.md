
## 【强制】 **通用命名规则**

- 本规则适用于所有对象名，包括：库名、表名、表名、列名、函数名、视图名、序列号名、别名等。
- 对象名务必只使用小写字母，下划线，数字，但首字母必须为小写字母，常规表禁止以`_`打头。
- 对象名长度不超过63个字符，命名统一采用`snake_case`。
- 禁止使用SQL保留字，使用`select pg_get_keywords(); `获取保留关键字列表。
- 禁止出现美元符号，禁止使用中文，不要以`pg`开头。
- 提高用词品味，做到信达雅；不要使用拼音，不要使用生僻冷词，不要使用小众缩写。

  

## 【强制】 **库命名规则**

- 库名最好与应用或服务保持一致，必须为具有高区分度的英文单词。
- 命名必须以`<biz>-`开头，`<biz>`为具体业务线名称，如果是分片库必须以-shard结尾。
- 多个部分使用-连接。例如：`<biz>-chat-shard`，`<biz>-payment`等，总共不超过三段。

  

## 【强制】 **角色命名规范**

- 数据库su有且仅有一个：postgres，用于流复制的用户命名为replication。
- 生产用户命名使用`<biz>-`作为前缀，具体功能作为后缀。
- 所有数据库默认有三个基础角色： `<biz>-read`，`<biz>-write`，`<biz>-usage`，分别拥有所有表的只读，只写，函数的执行权限。
- 生产用户，ETL用户，个人用户通过继承相应的基础角色获取权限。
- 更为精细的权限控制使用独立的角色与用户，依业务而异。

  

## 【强制】 **模式命名规则**

- 业务统一使用`<*>`作为模式名，`<*>`为业务定义的名称，必须设置为search_path首位元素。
- dba，monitor，trash为保留模式名。
- 分片模式命名规则采用：`rel_<partition_total_num>_<partition_index>`。
- 无特殊理由不应在其他模式中创建对象。

  

## 【推荐】 **关系命名规则**

- 关系命名以表意清晰为第一要义，不要使用含混的缩写，也不应过分冗长，遵循通用命名规则。
- 表名应当使用复数名词，与历史惯例保持一致，但应尽量避免带有不规则复数形式的单词。
- 视图以v_作为命名前缀，物化视图使用mv_作为命名前缀，临时表以tmp_作为命名前缀。
- 继承或分区表应当以父表表名作为前缀，并以子表特性（规则，分片范围等）作为后缀。

  

## 【推荐】 **索引命名规则**

- 创建索引时如**有条件**应当指定索引名称，并与PostgreSQL默认命名规则保持一致，避免重复执行时建立重复索引。
- 用于主键的索引以_pkey结尾，唯一索引以_key结尾，用于EXCLUDED约束的索引以_excl结尾，普通索引以_idx结尾。

  

## 【推荐】 **函数命名规则**

- 以select,insert,delete,update,upsert打头，表示动作类型。
- 重要参数可以通过_by_ids, _by_user_ids的后缀在函数名中体现。
- 避免函数重载，同名函数尽量只保留一个。
- 禁止通过BIGINT/INTEGER/SMALLINT等整型进行重载，调用时可能产生歧义。

  

## 【推荐】 **字段命名规则**

- 不得使用系统列保留字段名：oid, xmin, xmax,cmin, cmax, ctid等。
- 主键列通常命名为id，或以id作为后缀。
- 创建时间通常命名为created_time，修改时间通常命名为updated_time
- 布尔型字段建议使用is_，has_等作为前缀。
- 其余各字段名需与已有表命名惯例保持一致。

  

## 【推荐】 **变量命名规则**

- 存储过程与函数中的变量使用命名参数，而非位置参数。
- 如果参数名与对象名出现冲突，在参数后添加_，例如user_id_。

  

## 【推荐】 **注释规范**

- 尽量为对象提供注释（COMMENT），注释使用英文，言简意赅，一行为宜。
- 对象的模式或内容语义发生变更时，务必一并更新注释，与实际情况保持同步。