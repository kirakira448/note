*Amazon Simple Storage Service*
# 基本介绍
## 功能
一种存储服务。
以低成本提供产业领先的耐用性、可用性、效能、安全性以及几乎无线的可扩展性。
可以将资料以[[对象存储]]的形式存放在存储桶内.
>S3 可解决两大问题
>1. 不需要估计存储空间。建立存储桶，根据需要新增任意数量的文件。Amazon S3 具有弹性、可自动扩展存储空间。
>2. 上传到 Amazon S3 的文件会自动复制到区域中的多个可用区域。因此具有高可用性和高耐用性。

## 优势
- 高性能、可扩展性、可用性、耐久性，可用轻松搭建使用云端原生存储的应用。
- [[无服务器架构]]，具有高度可扩展性。
- 安全、合规和稽核功能。

## 如何使用 S3 构建云端解决方案

![[imgs/Pasted image 20230809174834.png]]

示例使用 S3 托管静态网站。
>1. 将网站内容上传至 Amazon S3 
>2. 导向 Amazon CloudFront (内容传递服务)
>3. 将内容传递到公网
>4. 从浏览器访问

## S3存储级别

^4196d5

![[Pasted image 20230812172422.png]]
### Standard 标准
*适用于频繁访问的数据的通用存储*

S3 标准针对频繁访问的数据，提供持久性、可用性和性能较高的对象存储。
由于 S3 标准可交付低延迟的高吞吐量，因此适合广泛使用案例，包括云应用程序、动态网站、内容分配、移动和游戏应用程序以及大数据分析。
#### 主要特征
- 较低的延迟和较高的吞吐量性能
- 可跨多个可用区实现 99.999999999％ 的对象的持久性
- 针对影响整个可用区的事件具有弹性
- 经过设计，可在指定年度内实现 99.99% 的可用性
- 由 [Amazon S3 服务等级协议](https://www.amazonaws.cn/legal/sla/)提供支持，实现可用性
- 支持传输中数据 SSL 和静态数据加密
- 用于自动将对象迁移到其他 S3 存储类的 S3 生命周期管理

#### 使用案例
- 仅包含静态内容的网站
- 经常被存取、检查或分析的日志的存储体
- 应用程序安装程序、配置文件和部署工具的存储体


### Standard-Infrequent Access 标准 - 不频繁访问
*适用于长期存在、但访问不太频繁的数据*

提供较高的持久性、较高的吞吐量以及较低的 S3 标准延迟，并且每 GB 的存储价格和检索费用都较低。
非常适用于灾难恢复文件的数据存储。
#### 主要特征
- 和 S3 标准相同的较低延迟和较高吞吐量性能      
- 可跨多个可用区实现 99.999999999％ 的对象的持久性      
- 针对影响整个可用区的事件具有弹性      
- 数据在整个可用区遭到破坏时具有弹性      
- 经过设计，可在指定年度内实现 99.9% 的可用性      
- 由 [Amazon S3 服务等级协议](https://www.amazonaws.cn/legal/sla/)提供支持，实现可用性
- 支持传输中数据 SSL 和静态数据加密
- 用于自动将对象迁移到其他 S3 存储类的 S3 生命周期管理

#### 使用案例
- 备份系统
- 很少存取，但必要时必须能快速存取的数据


### One Zone-Infrequent Access 单区 - 不频繁访问
*适用于不常访问、但在需要时要求快速访问的数据*

其他 S3 存储类将数据存储在至少三个[[区域和可用区#^21d1b7|可用区]] (AZ) 中，而 S3 单区 - IA 将数据存储在单个 AZ 中并且成本较 S3 标准 - IA 低 20%。
适合希望针对不频繁访问的数据使用较低费用选项且不需要 S3 标准或 S3 标准 - IA 的可用性和弹性的客户。
对于存储本地数据或可轻松重新创建的数据的辅助备份副本，它是一个理想的选择。
对于使用 S3 跨区域复制从另一 亚马逊云科技 中国区域复制的数据，您还可用它作为经济高效的存储。

S3 单区 – IA 提供相同的持久性†、较高的吞吐量以及较低的 S3 标准延迟，并且每 GB 的存储价格和检索费用都较低。
#### 主要特征
- 和 S3 标准相同的较低延迟和较高吞吐量性能      
- 经过设计，可在单个可用区中实现对象的 99.999999999％ 的持久性†      
- 可在指定年度内实现 99.5% 的可用性      
- 由 [Amazon S3 服务等级协议](https://www.amazonaws.cn/legal/sla/)提供支持，实现可用性
- 支持传输中数据 SSL 和静态数据加密
- 用于自动将对象迁移到其他 S3 存储类的 S3 生命周期管理

† 由于 S3 单区 – IA 将数据存储在单个 亚马逊云科技 可用区中，存储在这个存储类中的数据将在可用区销毁时丢失。

#### 使用案例
- 从其他 S3 存储桶跨区域备份的存储体
- 异地寸尺内部部署备份副本，备份的备份
- 可轻松取代的数据



### Glacier 存档
*适用于长期存档和数字保留*

安全、持久且成本低的存储类，可用于数据存档。
您可以放心存储任意大小的数据 – 成本与本地解决方案相当，甚至更低。
提供三种检索选项，各自的检索时间从数分钟到数小时不等。
您可直接将对象上传到 S3 Glacier，或使用 S3 生命周期策略在适用于活动数据的任何 S3 存储类（S3 标准、S3 智能分层、S3 标准 – IA 和 S3 单区 – IA）与 S3 Glacier 之间传输数据。

#### 主要特征
- 可跨多个可用区实现 99.999999999％ 的对象的持久性
- 数据在整个可用区遭到破坏时具有弹性
- 支持传输中数据 SSL 和静态数据加密
- 成本低，非常适合长期存档
- 检索时间可配置，从数分钟到数小时不等
- 用于直接上传到 S3 Glacier 的 S3 PUT API，以及用于对象自动迁移的 S3 生命周期管理

#### 使用案例
- 因法律、政策等目的二需要长期存档。
- 取代内部部署储存或异地储存的磁盘。
- 用于大型媒体文件的数字媒体资产


### Glacier Deep Archive 深度存档
*适用于长期存档和数字保留*

成本最低的存储类，支持每年可能访问一两次的数据的长期保留和数字预留。
为了满足监管合规要求，将数据集保留 7-10 年或更长时间。
例如：
- 金融服务
- 医疗保健
- 公共部门

还可用于备份和灾难恢复使用案例，是成本效益高、易于管理的磁带系统替代，无论磁带系统是本地库还是非本地服务都是如此。
S3 Glacier Deep Archive 是 Amazon S3 Glacier 的补充，后者适合存档，其中会定期检索数据并且每隔几分钟可能需要一些数据。
存储在 S3 Glacier Deep Archive 中的所有对象都将接受复制并存储在至少三个地理分散的可用区中，受 99.999999999% 的持久性保护，并且可在 12 小时内恢复。  

#### 使用案例
- 必须为合规用途而保留。
- 长期数据库


#### 主要特征
- 可跨多个可用区实现 99.999999999％ 的对象的持久性      
- 为长期保留的数据（保留 7-10 年）设计的成本最低的存储类      
- 磁带库的完美替代      
- 检索时间为 12 小时以内      
- 用于直接上传到 S3 Glacier Deep Archive 的 S3 PUT API，以及用于自动迁移对象的 S3 生命周期管理
### Intelligent-Tiering 智能分层
*适用于具有未知或变化的访问模式的数据*

唯一一个在访问模式发生变化时通过在四个访问层之间移动对象来自动节约成本的云存储类。
S3 智能分层存储类旨在通过自动将数据移动到最具成本效益的访问层来优化成本，不会产生运营开销。

**工作原理：**
对象存储在四个访问层中：
- 两个已针对频繁访问和不频繁访问而优化的低延迟访问层；
- 两个专为异步访问而设计且已针对罕见访问而优化的可选存档访问层。

1. 上传或转换到 S3 智能分层的对象将自动存储在频繁访问层中。
2. 每个对象每月只需支付少量的监控和自动化费用，Amazon S3 即可监控 S3 智能分层中对象的访问模式，然后将连续 30 天未访问的对象移至不频繁访问层。
3. 您可以激活一个或两个存档访问层，自动将 90 天未访问的对象移至存档访问层，然后在 180 天后将这些对象移至深度存档访问层。
4. 如果稍后访问对象，S3 智能分层会将该对象移回频繁访问层。

这意味着存储在 S3 智能分层中的所有对象在需要时始终可用。在使用 S3 智能分层存储类时不收取检索费用，并且在访问层之间移动对象不收取额外的分层费用。对于访问模式未知或不可预测的长期存在的数据，它是理想的存储类。

#### 主要特征
- 随着访问模式的变化，自动优化数据的存储成本
- 将对象存储在四个访问层中，这些层针对频繁、不频繁和罕见访问进行了优化
- 频繁和非频繁访问层具有与 S3 标准相同的低延迟和高吞吐量性能      
- 为罕见访问的对象激活可选的自动存档功能      
- 存档访问层和深度存档访问层的性能与 Glacier 和 Glacier Deep Archive 相同      
- 可跨多个可用区实现 99.999999999% 的对象的持久性      
- 可在指定年度内实现 99.9% 的可用性
- 由 [Amazon S3 服务等级协议](https://www.amazonaws.cn/legal/sla/)提供支持，实现可用性
- 每月​支付少量的监控和自动分层费用
- 无运营开销、生命周期费用和检索费用

#### 使用案例
- 不可预测的工作负载
- 未知的工作负载
- 快速变动的工作负载




# 使用
## 基本流程
### 1.建立存储桶

### 2.设定存储桶
1. 选择区域
2. 设定权限
	- 在创建存储桶时，默认是非公开的。
3. 版本控制
	- 可以控制每个对象的版本，当对象被修改时赋予唯一的版本ID
4. 标签
### 3.上传对象
- 无限数据
- 单个对象不能大于 5TB
- 使用主控台上传不能大于 160GB
- 可以使用 Command Line Interface (CLI) 上传较大的文件

上传时，可以选择[[#^4196d5|存储级别]]
### 4.使用对象

### 5.删除对象和存储桶

### 可公有访问
1. 选择要更改权限的存储桶==>权限==>屏蔽公共访问权限==>编辑==>取消勾选所以有安全政策
2. 编辑存储桶策略
```json
{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "PublicReadGetObject",
			"Effect": "Allow",
			"Principal": "*",
			"Action": "s3:GetObject",
			"Resource": [		
			/* "存储桶 ARN / 文件名" */	    "arn:aws:s3:::myawsbucket86127/cfa712d4418b1433012ff5c4b9123cc014aa847a.jpg"
			
			    ]
		}
	]
}
```

