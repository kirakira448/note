*Amazon Virtual Private Cloud*
# 基本介绍
## 功能
虚拟私有云。
VPC指的是一种云，是一种云计算服务，是一种运行在公有云上，将一部分公有云资源为某个用户隔离出来，让这个用户私有使用的资源的集合。
使用 Amazon VPC，您可以在AWS云中自己的逻辑隔离区域中定义虚拟网络。
适用于 Amazon EC2 虚拟计算环境的 Amazon VPC（称为实例）可用于各种AWS资源。

VPC 提供了可在安全环境中实现灵活性的各种选项，例如：
- 要配置您的 VPC，您可以设置其 IP 地址范围、创建子网、配置路由表、网络网关、网络接口和安全设置。    
- 要使AWS云成为您的数据中心的扩展，您可以将您的 VPC 连接到您自己的公司数据中心。    
- 您可以将 VPC 中的实例连接到互联网，或者将您的实例隔离在私有网络上。    
- 要保护各个子网中的资源，您可以利用多种安全层，包括安全组和网络访问控制列表 (ACL)。
>**解决问题：**
>可用于随需提升和监控 Virtual Private Cloud(VPC) 的安全。
>因此，可以在需要时建立资料中心，不再需要时将其终止

## 优势
- 可提供进阶安全功能，供您在执行 个体层级和子网层级 进行 传入传出流量筛选。
- 减少 设定、管理和验证 的事件。专注于VPC中执行的应用程序。
- 可以选择自己的IP地址范围、建立自己的子网，以及设定路由表至任何可用闸道

## 如何使用 VPC 构建云端解决方案
![[imgs/Pasted image 20230810133719.png]]
图例：如何使用VPC来搭建同时具有公有子网和私有子网
>公有子网的[[EC2]]执行个体托管*能访问公网的Web应用程序*
>私有子网的[[RDS]]执行个体会受到保护，无法直接访问公网


# 使用
## 创建对等连接
### 1.根据提示创建对等连接。
1. 在vpc界面，选择*对等连接*。
2. 选择*创建对等连接*。
3. 创建名称，例如：`Developer<>Finance`
4. 选择 VPC 的请求者与接受方。
5. 创建对等连接。

### 2.启动对等连接
选中刚才创建的对等连接，选择`操作`==>`接收请求`

### 3.修改路由表
0. 首先查看VPC请求者与接受方的`私有IPv4地址`
1. 修改请求者的路由表
	1. 选择当前vpc中要使用的实例，选择`子网ID`
	2. 选择要修改的子网，点击路由表链接
	3. 选中路由表，在下方切换到`路由`选项
	4. 点击`编辑路由`
	5. 点击`添加路由`
		1. 根据接受方的`私有IPv4地址`，填写目标。
		2. 输入`pcx-`或选择`对等连接`，检查弹出选项，选择之前创建的对等连接。
		3. 保存更改。
2. 修改接受方的路由表，方法同上，注意修改为请求者的`私有IPv4地址`

### 4.设置安全组
1. 选择接受方实例
2. 切换到`安全`选项
3. 点击`安全组`链接
4. 在`入站规则`选项下，点击`编辑入站规则`
	1. 点击`添加规则`
	2. 类型：`自定义 ICMP - IPv4`
	3. 源：根据请求者的`私有IPv4地址`填写，如 `192.168.0.0/16`
	4. 保存规则
### 5.测试连接
1. 选中请求者实例，点击`连接`
2. 选择`会话管理器`，点击`连接`
3. 输入命令`ping 接受方私有ip地址`
4. 能ping通说明设置成功。




